<!DOCTYPE html>

<html layout:decorate="~{fragments/layout}">

<head>
	<title>KURIR</title>
</head>

<body>
	<div layout:fragment="content">
		<!-- Modal -->
		<div class="modal fade modalCourier" id="modalCenter" tabindex="-1" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="modalCenterTitle">Modal title</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
						</button>
					</div>
					<div class="modal-body">
						...
					</div>
				</div>
			</div>
		</div>
		<!-- End Modal -->

		<!-- Striped Rows -->
		<div class="card">
			<div class="card-header">
				<div class="card-title">
					<h5>KURIR</h5>
				</div>

				<div class="flex-grow-1 row">
					<div class="col-12 col-md-4 col-sm-4 mb-sm-0 mb-2">
						<div class="col-12">
							<div class="input-group input-group-merge">
								<span class="input-group-text" id="basic-addon-search31"><i
										class="bx bx-search"></i></span> <!--icon pencarian-->
								<input type="text" id="searchName" class="form-control" oninput="getName(this.value)"
									placeholder="Search by nama..." aria-label="Search..."
									aria-describedby="basic-addon-search31">
							</div>
							<br>
						</div>
					</div>
					<div class="col-1 col-md-8 col-sm-8 text-end">
						<button onclick="tableTambah()" class="btn btn-primary">Tambah</button>
					</div>
					<div>
						<select id="sortName" onchange="sortName(this.value)">
							<!--sorting-->
							<option value="ASC">A-Z</option>
							<option value="DESC">Z-A</option>
						</select>
					</div>
					<br>
					<br>
					<div>
						<select id="dataSize" onchange="dataSize(this.value)">
							<option value="5">5</option>
							<option value="10">10</option>
							<option value="15">15</option>
						</select>
					</div>

				</div>


			</div>
			<!--SEMENTARA-->

			<!--SEMENTARA-->

			<!-- Modal -->
			<div class="modal fade modalCourier" id="modalCenter" tabindex="-1" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="modalCenterTitle">Modal title</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
							</button>
						</div>
						<div class="modal-body">
							...
						</div>


					</div>
				</div>
			</div>
			<!-- End Modal -->

			<div id="isitabelUtama"></div>

			<style>
				thead,
				tbody,
				tfoot,
				tr,
				td,
				th {
					border-color: inherit;
					border-style: solid;
					border-width: 0;
					width: 10%;
				}
			</style>

			<script>
				$(
					function () {
						console.log("refresh")
						getAllCourier(0, 5)

					}
				)

				function getAllCourier(currentPage, size) {
					var keyword = ""
					var sortType = $("#sortName").val()

					$.ajax({
						url: '/api/courier/paging?currentPage= ' + currentPage + '&size=' + size + '&keyword=' + keyword + '&sortType=' + sortType,
						type: 'get',
						contentType: 'application/json',
						success: function (response) {
							tabelUtama(response, size, keyword, sortType)
							//alert("-Refresh- " + "response : " + response + " currentPage : " + currentPages + " size : " + size + " keyword : " + keyword + " sortType : " + sortType)
						},
						error: function (xhr, status, error) {
							console.error('AJAX request failed. Status: ' + status + ', Error: ' + error);
						}
					})

				}


				function tabelUtama(response, size, keyword, sortType) {
					var str = '<table class="table table-borderless" border="2">'
					str += '<thead class="thead-light">'
					str += '<tr>'
					str += '<div class="col-1 col-md-8 col-sm-8 text-end">'
					str += '<th scope="col">NO</th>'
					str += '</div>'
					str += '<div class="col-1 col-md-8 col-sm-8 text-end">'
					str += '<th scope="col">NAMA</th>'
					str += '</div>'
					str += '<div class="col-1 col-md-8 col-sm-8 text-end">'
					str += '<th scope="col" style="text-align : right;">#</th>'
					str += '</div>'
					str += '</tr>'
					str += '</thead>'
					str += '<tbody>'
					if (response.datakurir.length == 0) {
						str += '<tr>'
						str += '<td>Data tidak ditemukan</td>'
						str += '</tr>'
					}
					else {
						for (var i = 0; i < response.datakurir.length; i++) { //5 data

							console.log("response = " + response.datakurir.length + "current = " + response.pages)
							var no = response.pages * size + (i + 1)
							str += '<tr>'
							str += '<td>' + no + '</td>'
							str += '<td>' + response.datakurir[i].name + '</td>'
							str += '<td width="80%"style="text-align : right;"><button class ="btn btn-primary ;text-align : right;" value="' + response.datakurir[i].id + '" onclick="f_ubah(value)">Ubah</td>'
							str += '<td style="text-align : left;"><button class ="btn btn-danger" value="' + response.datakurir[i].id + '" onclick="f_hapus(value)">Hapus</td>'
							str += '</tr>'

						}



					}

					str += '</tbody>'
					str += '</table>'

					//INI PAGING
					str += '<nav aria - label="Page navigation example">'
					str += '<ul class="pagination justify-content-end">'
					var prevMove = response.pages - 1 <= 0 ? 0 : response.pages - 1
					str += '<li class="page-item ">'
					str += '<a class="page-link" onclick="getAllCourier(' + prevMove + ',' + size + ')">&laquo;</a>'
					str += '</li>'
					var index = 1;
					for (var i = 0; i < response.total_pages; i++) {
						str += '<li class="page-item"><a class="page-link" onclick="getAllCourier(' + i + ',' + size + ')">' + index + '</a></li>'
						index++;
					}

					var nextMove = response.pages + 1 > response.total_pages - 1 ? response.total_pages - 1 : response.pages + 1
					str += '<li class="page-item">'
					str += '<a class="page-link" onclick="getAllCourier(' + nextMove + ',' + size + ')">&raquo;</a>'
					str += '</li>'
					str += '</ul>'
					str += '</nav >'

					$('#isitabelUtama').empty()
					$('#isitabelUtama').html(str)

				}



				function tableTambah() {
					var str = '<form id="form_add" action="/api/courier/add" method="post">'
					str += '<input type="hidden" class="form-control" id="id" name="id">'
					str += '<div class="form-group">'
					str += '<label>Nama</label>'
					str += '<input type="text" class="form-control" id="name" name="name" oninput="hapusValidate()">'
					str += '<span id="validate_name" class="text-danger"></span>'
					str += '</div>'
					str += '<div class="modal-footer">'
					str += '<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="btnNo">Batal</button>'
					str += '<button type="submit" class="btn btn-primary" id="btnSave">Save changes</button>'
					str += '</div>'
					str += '</form>'


					$(".modal-title").html("Tambah")

					$(".modal-body").html(str)
					$("#btnSave").html("Simpan")
					$("#btnSave").off("click").on("click", function () {
						formValidation()
					})
					$("#modalCenter").modal('toggle')

				}

				function hapusValidate() {
					$("#validate_name").empty()
				}

				function formValidation() {
					var name = $("#name").val().trim()
					name.trim()

					$("#form_add").validate({
						errorClass: "text-danger",
						rules: {
							name: {
								required: true,
								noSpace: true,
								validInput: true

							}
						},
						messages: {
							name: {
								required: "Nama Tidak Boleh Kosong",
								noSpace: "Masukkan nama dengan benar",
								validInput: "Special Character"

							}
						},
						submitHandler: function (form) {

							saveCourier()


						}

					})
				}

				function saveCourier() {

					var formdata = '{'
					formdata += '"name":"' + $("#name").val().trim() + '"'
					formdata += '}'
					//var obj = {};//buat variable array
					//obj.name = $("#name").val().trim();



					$.ajax({
						url: '/api/courier/add',
						data: formdata,
						type: 'post',
						contentType: 'application/json',
						success: function () {
							//Swal.fire(
							//'Good job!',
							//'You clicked the button!',
							//'success'
							//)

							$("#modalCenter").modal('toggle')
							getAllCourier(0, 5)
						}

					})
				}


				function f_ubah(id) {
					$.ajax({
						url: '/api/courier/' + id,
						type: 'get',
						contentType: 'application/json',
						success: function (courier) {
							var str = '<form id="form_add" action="/api/courier/edit" method="put">'
							str += '<input type="hidden" class="form-control" id="id" name="id" value="' + courier.id + '">'
							str += '<div class="form-group">'
							str += '<label>Nama</label>'
							str += '<input type="hidden" class="form-control" id="nameold" name="nameold" value="' + courier.name + '">'
							str += '<input type="text" class="form-control" id="name" name="name" value="' + courier.name + '">'
							str += '<span id="validate_name" class="text-danger"></span>'
							str += '</div>'
							str += '<div class="modal-footer">'
							str += '<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="btnNo">Batal</button>'
							str += '<button type="submit" class="btn btn-primary" id="btnSave">Save changes</button>'
							str += '</div>'
							str += '</form>'

							//console.log("s" + courier.name)
							//var nama_awal = courier.name;
							$(".modal-title").html("Ubah")
							$(".modal-body").html(str)
							$("#btnSave").html("Simpan")
							$("#btnNo").html("Batal")
							//$("#btnSave").off('click').on("click", updateCategory)   //untuk tanpa parameter
							$("#btnSave").off('click').on("click",
								function () {
									var nameold = $("#nameold").val()
									var name = $("#name").val()
									if (nameold == name) {
										$("#modalCenter").modal('toggle')
										//console.log("1")
										//alert("masuk ges")
										//getAllCourier(0, 5)
										console.log("validasi nama sama")
										//	window.location.href = '/irfan/m_courier'
										return false
									}
									else {
										formValidationEdit()	//mengirimkan parameter id	
										console.log("validasi nama beda")
									}
								})
							$("#modalCenter").modal('show')

						}
					})
				}

				function formValidationEdit() {
					var name = $("#name").val().trim()
					$("#form_add").validate({
						errorClass: "text-danger",
						rules: {
							name: {
								required: true,
								noSpace: true,
								validInput: true

							}
						},
						messages: {
							name: {
								required: "Nama Tidak Boleh Kosong",
								noSpace: "No space",
								validInput: "Special Character"

							}
						},
						submitHandler: function (form) {
							var id = $("#id").val()
							id = id != "" ? id : 0
							var name = $("#name").val().trim()
							$.ajax({
								url: '/api/checkname',
								type: 'get',
								data: {name: name, id: id},
								dataType: 'json',
								success: function (response) {
									//alert("aaaa")

									if (response == true) {
										$("#validate_name").text("Name is already exist")
										return true
										console.log("2")
									}
									else {
										updateCourier(id)
										console.log("3")
									}


								}
							})
						}
					})
				}


				function updateCourier(id) {
					var formdata = '{'
					formdata += '"name":"' + $("#name").val() + '"'
					formdata += '}'

					$.ajax({
						url: '/api/courier/edit/' + id,
						data: formdata,
						type: 'put',
						contentType: 'application/json',
						success: function () {
							$("#modalCenter").modal('toggle')
							getAllCourier(0, 5)
						}
					})
				}

				function f_hapus(id) {
					$.ajax({
						url: '/api/courier/' + id,
						type: 'get',
						contentType: 'application/json',
						success: function (data) {
							var str = '<h6>Anda akan menghapus cara pembayaran ' + data.name + '? </h6>'
							str += '<div class="modal-footer">'
							str += '<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="btnNo">Batal</button>'
							str += '<button type="submit" class="btn btn-primary" id="btnSave">Save changes</button>'
							str += '</div>'

							$(".modal-title").html("Hapus!")
							$(".modal-body").html(str)
							$("#btnSave").html("Ya")
							$("#btnNo").html("Tidak")
							$("#btnSave").off('click').on('click',
								function () {
									deleteCourier(id)

								})
							$("#modalCenter").modal('show')
						}
					})
				}

				function deleteCourier(id) {
					$.ajax({
						url: '/api/courier/delete/' + id,
						type: 'put', //soft delete
						contentType: 'application/json',
						success: function () {
							$("#modalCenter").modal('toggle')
							getAllCourier(0, 5)
						}
					})
				}
				//getName

				function getName(keyword) {
					var currentPage = 0
					var size = $("#dataSize").val()
					var sortType = $("#sortName").val()

					//alert("cek sortType : " + sortType + " cek keyword : " + keyword + " size " + size)



					$.ajax({   //format AJAX
						//url: '/api/category',  //dari Api Categorry  untuk tanpa paging   //request param (?)
						url: '/api/courier/paging?currentPage=' + currentPage + '&size=' + size + '&keyword=' + keyword + '&sortType=' + sortType,     //pake PAGING    
						type: 'get',
						contentType: 'application/json',
						success: function (response) {
							tabelUtama(response, size, keyword, sortType)
						}
					})
				}

				function sortName(sortType) {
					var currentPage = 0
					var size = $("#dataSize").val()
					var keyword = $("#searchName").val()


					$.ajax({   //format AJAX
						//url: '/api/category',  //dari Api Categorry  untuk tanpa paging   //request param (?)
						url: '/api/courier/paging?currentPage=' + currentPage + '&size=' + size + '&keyword=' + keyword + '&sortType=' + sortType,     //pake PAGING    
						type: 'get',
						contentType: 'application/json',
						success: function (response) {
							tabelUtama(response, size, keyword, sortType)
							//alert("-SORT- " + "response : " + response + " currentPage : " + currentPage + " size : " + size + " keyword : " + keyword + " sortType : " + sortType)
							console.log("-SORT- " + "response : " + response + " currentPage : " + currentPage + " size : " + size + " keyword : " + keyword + " sortType : " + sortType)
						}
					})
				}

				function dataSize(size) {
					var currentPage = 0
					//var size = $("#dataSize").val()
					var keyword = $("#searchName").val()
					var sortType = $("#sortName").val()


					$.ajax({   //format AJAX
						//url: '/api/category',  //dari Api Categorry  untuk tanpa paging   //request param (?)
						url: '/api/courier/paging?currentPage=' + currentPage + '&size=' + size + '&keyword=' + keyword + '&sortType=' + sortType,     //pake PAGING    
						type: 'get',
						contentType: 'application/json',
						success: function (response) {
							tabelUtama(response, size, keyword, sortType)
							//alert("-SIZE- " + "response : " + response + " currentPage : " + currentPage + " size : " + size + " keyword : " + keyword + " sortType : " + sortType)
							console.log("-SIZE- " + "response : " + response + " currentPage : " + currentPage + " size : " + size + " keyword : " + keyword + " sortType : " + sortType)
						}
					})
				}



				jQuery.validator.addMethod("noSpace", function (value, element) {
					return value == '' || value.trim().length != 0;
				})


				jQuery.validator.addMethod("validInput", function (value, element) {
					return /^[a-zA-Z ]*$/.test(value);
				})


				//UNTUK CARI DOKTER
				function caridokterform() {
					$.ajax({
						url: '/api/caridokter/lokasi',
						type: 'get',
						contentType: 'application/json',
						success: function (response) {
							$.ajax({
								url: '/api/caridokter/spesialisasi',
								type: 'get',
								contentType: 'application/json',
								success: function (response2) {
									$.ajax({
										url: '/api/caridokter/tindakan',
										type: 'get',
										contentType: 'application/json',
										success: function (response3) {
											var formcari = ''
											formcari += '<a style="margin-left: 10%; text-align: left; font-size: 16px;">'
											formcari += 'Masukan Minimal 1 Kata Kunci untuk Pencarian Dokter</a>'
											formcari += '<div style="margin-right: 10%; margin-left: 10%;">'
											formcari += '<div class="form-group basic-dropdown">'
											formcari += '<label id="lokasi" class="col-form-label">Lokasi</label>'
											formcari += '<select class="form-control custom-select custom-select-md" id="lokasi">'
											console.log(response)
											formcari += '<option value="">--Pilih Lokasi--</option>';
											for (i = 0; i < response.length; i++) {
												formcari += '<option value="' + response[i].name + '">' + response[i].name + '</option>'
											}
											formcari += '</select>'
											formcari += '</div>'
											formcari += '<div class="form-group">'
											formcari += '<label for="nameDoctor" class="col-form-label">Nama Dokter</label>'
											formcari += '<input type="text" class="form-control" id="nameDoctor" placeholder="Enter Fullname">'
											formcari += '</div>'
											formcari += '<div class="form-group basic-dropdown">'
											formcari += '<label for="spesialisasi" class="col-form-label">Spesialisasi/Sub-spesialisasi*</label>'
											formcari += '<select class="form-control custom-select custom-select-md" id="spesialisasi">'
											console.log(response2)
											formcari += '<option value="" selected>--Pilih Spesialisasi--</option>';
											for (i = 0; i < response2.length; i++) {
												formcari += '<option value="' + response2[i].name + '">' + response2[i].name + '</option>'
											}
											formcari += '</select>'
											formcari += '<label id="Msg"></label>'
											formcari += '</div>'
											formcari += '<div class="form-group basic-dropdown">'
											formcari += '<label for="tindakan" class="col-form-label">Tindakan Medis</label>'
											formcari += '<select class="form-control custom-select custom-select-md" id="tindakan">'
											console.log(response3)
											formcari += '<option value="kosong" selected>--Pilih Tindakan Medis--</option>';
											for (i = 0; i < response3.length; i++) {
												formcari += '<option value="' + response3[i].name + '">' + response3[i].name + '</option>'
											}
											formcari += '</select>'
											formcari += '</div>'
											formcari += '</div>'
											formcari += '<div style="text-align: center">'
											formcari += '<br>'
											formcari += '<fieldset class="w-100">'
											formcari += '<button type="button" class="btn btn-outline-primary" onclick="aturUlang()" style="margin-right: 5%; border-radius: 8px; width: 25%; font-size: 15px;">Atur Ulang</button>'
											formcari += '<button type="button" class="btn btn-primary" style="margin-right: 5%; border-radius: 8px; width: 25%; font-size: 15px;" onclick="cariDokter()">Cari</button>'
											formcari += '<br>'
											formcari += '</fieldset>'
											formcari += '</div>'

											$('#modalCenter').modal('show')
											$('.modal-title').html('Cari Dokter')
											$('.modal-body').html(formcari)
										}
									})
								}
							})

						}
					})

				}
				function cariDokter() {
					//alert("masuk")
					console.log("masuk else")
					var namadokter = $('#nameDoctor').val()
					var lokasi = $('#lokasi').val()
					var spesialisasi = $('#spesialisasi').val()
					var tindakan = $('#tindakan').val()


					console.log("fullname : " + namadokter)
					console.log("spec : " + spesialisasi)
					console.log("lokasi: " + lokasi)
					console.log("tindakan : " + tindakan)

					if (spesialisasi == "") {
						$('#Msg').html('*Spesialisasi tidak boleh kosong')
						$('#spesialisasi').css('border-color', 'red');

					}
					else {
						tampilpencarian(namadokter, tindakan, lokasi, spesialisasi);
						listDokter(0, 3, namadokter, tindakan, lokasi, spesialisasi)

						cari();
						$("#modalCenter").modal("hide");

						//$("#listDokter").empty()

						//	console.log("diatas listDOkter 02")



					}
				}

				function tampilpencarian(namadokter, tindakan, lokasi, spesialisasi) {
					//var specialization = sessionStorage.getItem('specialization2', specialization);
					//var location = sessionStorage.getItem("location2", location);
					//var fullname = sessionStorage.getItem("fullname2", fullname);
					//var treatment = sessionStorage.getItem("treatment2", treatment);
					console.log("cek lokasi" + location)

					if (spesialisasi == '') {
						$("#hasilSpesialisasi").text("");
					} else {
						$("#hasilSpesialisasi").text("Spesialisasi/Sub-spesialisasi: " + spesialisasi.replace("Spesialis", ""));
					}
					if (lokasi == '') {
						$("#hasilLokasi").text("Hasil Pencarian berdasarkan kata kunci:");
					} else {
						$("#hasilLokasi").text("Hasil Pencarian berdasarkan kata kunci: " + lokasi);
					}
					if (namadokter == '') {
						$("#hasilFullname").text("");
					} else {
						$("#hasilFullname").text("Nama Dokter: " + namadokter);
					}
					if (tindakan == '') {
						$("#hasilTreatment").text("");
					} else {
						$("#hasilTreatment").text("Tindakan Dokter: " + tindakan);
					}
					//sessionStorage.removeItem('fullname2', fullname)
					//sessionStorage.removeItem('treatment2', treatment)
					//sessionStorage.removeItem('specialization2', specialization)
					//sessionStorage.removeItem('location2', location)
				}
				function listDokter(currentPage, size, namadokter, tindakan, lokasi, spesialisasi) {


					console.log("test before ajax doc search")

					$.ajax({
						url: "/api/hasil/caridokter2",
						type: "get",
						contentType: 'application/json',
						data: {
							fullname: namadokter,
							treatment: tindakan,
							location: lokasi,
							specialization: spesialisasi,
							currentPage: currentPage,
							size: size
						},

						success: function (hasil) {
							console.log("hasil cari " + hasil.data.length)
							var str = "";
							var str2 = "<a class='btn btn-outline-primary btnChat'>Chat</a>";
							var tampil = "";
							var minShowData = 0;
							var totalData = 0;
							var maxShowData = 0;
							var online = [];
							var id_dokter = 0;
							var arrid = [];

							console.log("data length " + hasil.data.length)

							//Paging Button

							var nextMove = hasil.pages + 1 > hasil.total_pages - 1 ? hasil.total_pages - 1 : hasil.pages + 1
							var testMove = hasil.pages + 1
							var testMoveInfo = 0
							var nextCondition = ''
							if (testMove > hasil.total_pages - 1) {
								testMoveInfo = "then this page is max page"
								nextCondition = 'disabled'
							}
							else {
								testMoveInfo = "then this page is not max page"
							}

							var prevMove = hasil.pages - 1 < 0 ? 0 : hasil.pages - 1
							var testMove1 = hasil.pages - 1
							var testMoveInfo1 = 0
							var prevCondition = ''
							if (testMove1 < 0) {
								testMoveInfo1 = "then this page is first page"
								prevCondition = 'disabled'
							}
							else {
								testMoveInfo1 = "then this page is not first page"
							}

							//	var str1 = '<button type="button" class="btn btn-outline-primary" id="prevButton" onclick="listDokter(\'' + currentPage + '\', \'' + size + '\', \'' + namadokter + '\', \'' + tindakan + '\', ' + lokasi + ', ' + spesialisasi + ')" ' + prevCondition + '>Sebelumnya</button>'
							//	str += '<a class="page-link" onclick="getAllMedical(' + nextMove + ',' + size + ')" ' + nextCondition + ' >Next</a>
							var str1 = '<button type="button" class="btn btn-outline-primary" id="prevButton" onclick="listDokter(' + prevMove + ', ' + size + ', \'' + namadokter + '\', \'' + tindakan + '\', \'' + lokasi + '\', \'' + spesialisasi + '\')" ' + prevCondition + '>Sebelumnya</button>';
							str1 += '<button type="button" class="btn btn-outline-primary" id="nextButton" onclick="listDokter(' + nextMove + ', ' + size + ', \'' + namadokter + '\', \'' + tindakan + '\', \'' + lokasi + '\', \'' + spesialisasi + '\')" ' + nextCondition + '>Selanjutnya</button>';

							$(".btnPagination").html(str1)


							//INTI
							if (hasil.data.length == 0) {
								str += "<h4 style='margin-left:35%;color:#0089a8;'>Data Dokter tidak ditemukan</h4>";
								$("#listDokter").html(str);

							} else {


								console.log("ELSE VIEW LIST DOCTOR")
								//for (var i = 0; i < hasil.length; i++) {
								//if (hasil[i].doctor_id != id_dokter) {
								//console.log("id_dokter" + id_dokter)
								//maxShowData++;
								//}
								//id_dokter = hasil[i].doctor_id;
								//console.log("id_dokter* " + id_dokter)
								//}

								//	var limit = 4;
								//var pageIni = (page - 1);
								//	var offset = pageIni * limit
								//	var max = offset + limit
								//	if (max > maxShowData) {
								//	$('#btnNext').prop('disabled', true)
								//}
								//	if (max > maxShowData) {
								//		max = maxShowData;
								//	}
								//	page = $('#page').val(page);

								//id_dokter = 0;

								for (var i = 0; i < hasil.data.length; i++) {
									var sekarang = new Date();
									var tahunSekarang = sekarang.getFullYear

									var pengalamanDokter = sekarang - hasil.data[i].start_date
									console.log("endz" + pengalamanDokter)
									str += "<div id='" + hasil.data[i].doctor_id + "' class='col-lg-6' nama-dokter='" + hasil.data[i].fullname + "' tindakan-dokter='" + + "'>";
									str += "<div class='card'>"
									str += "<div class='card cardMaster'><div class='card-body'>"
									str += "<div class='row' style='margin-top: 0;'><div class='column' style='width: 75%;'>"
									str += "<h4 class='card-text namaDokter'>" + hasil.data[i].fullname + "</h4>"
									str += "<div class='pengalamanDokter'>"
									str += "<a>" + hasil.data[i].name + "</a><br><a>" + hasil.data[i].start_date + " Tahun Pengalaman</a></div>";
									str += "<div class='listRS' id='listRS" + hasil.data[i].doctor_id + "'>";
									str += "</div>"
									var doctorId = hasil.data[i].doctor_id
									str += "<a id='btnLihat'><button id='btnLihat' value='" + hasil.data[i].doctor_id + "'onclick='detaildokter(" + doctorId + ")' class='btn btn-outline-primary btnDetail'>Lihat info lebih banyak</button></a></div>"
									str += "<div class='column' style='width:125px'><img class='mr-3 class doctorImage' src='" + hasil.data[i].image_path + "' style='width: 125px; height: 125px;'>"
									str += "<div align='center' class ='buttonChat' id='buttonChat" + hasil.data[i].doctor_id + "' style='margin-top: 20%;'><a class='offline btnChat' disabled>Offline</a></div>"
									str += "<br>"
									//tambah kondisi online mmfs rumah sakit
									str += "<div align='center' id='buttonJanji'><button type='button' class='btn btn-primary btnJanji'>Buat Janji</button></div>"
									str += "</div></div></div></div></div></div>"

									arrid[i] = hasil.data[i].doctor_id;


									id_dokter = hasil.data[i].doctor_id;

								}
								//	console.log("offset " + offset)
								var doctorLength = hasil.data.length - 1
								//var intDoctorLength = 
								//var str = ' Menampilkan ' + searchResult.data[0].doctorId + '-' + searchResult.data[doctorLength].doctorId + ' dari ' + searchResult.total + ''
								// Calculate the range of doctors displayed
								var startIndex = (currentPage * size) + 1
								var endIndex = Math.min((currentPage + 1) * size, hasil.total)

								var sr = 'Menampilkan ' + startIndex + ' - ' + endIndex + ' dari ' + hasil.total
								console.log("HASIL SR = " + sr)
								console.log("doctor in this page : " + hasil.data)
								console.log("doctor length in this page : " + doctorLength)
								console.log("total pages = " + hasil.total_pages)
								console.log("total data = " + hasil.total)
								console.log("total data in this page = " + hasil.data.length)
								//$("#pagination").html(str)
								//tampil = "Menampilkan " + (offset + 1) + " - " + max + " dari " + maxShowData;
								$('#btnTampilan').html(sr);
								$("#listDokter").html(str);

								for (var i = 0; i < online.length; i++) {
									$("#buttonChat" + online[i]).html(str2);
									console.log("test online" + online.length)
								}
								listRs(arrid);
							}
						}
					});

				}


				$("#btnSearch").click(function () {
					caridokterform();
				});

				function cari() {
					window.open('/doctor/cari', '_self')
				}

			</script>

		</div>
	</div>
</body>

</html>